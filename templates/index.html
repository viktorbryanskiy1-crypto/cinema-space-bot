<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>üåå –ö–∏–Ω–æ–í—Å–µ–ª–µ–Ω–Ω–∞—è</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        /* === –£–õ–¨–¢–†–ê–°–û–í–†–ï–ú–ï–ù–ù–´–ô –ö–û–°–ú–ò–ß–ï–°–ö–ò–ô PRELOADER === */
        #cosmic-preloader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            transition: opacity 0.8s cubic-bezier(0.22, 0.61, 0.36, 1);
            overflow: hidden;
        }

        .cosmic-content {
            text-align: center;
            position: relative;
            z-index: 2;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø-–≥–∞–ª–∞–∫—Ç–∏–∫–∞ */
        .cosmic-logo {
            width: 90px;
            height: 90px;
            margin: 0 auto 25px;
            position: relative;
        }

        .galaxy-core {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, #00f3ff, #ff00c8);
            box-shadow: 0 0 40px #00f3ff, 0 0 80px #ff00c8;
            animation: galaxyPulse 3s ease-in-out infinite;
        }

        .orbit-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 150px;
            height: 150px;
            margin: -75px 0 0 -75px;
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 50%;
            animation: orbitRotate 20s linear infinite;
        }

        .orbit-particle {
            position: absolute;
            top: 0;
            left: 50%;
            width: 8px;
            height: 8px;
            margin-left: -4px;
            background: #ff00c8;
            border-radius: 50%;
            box-shadow: 0 0 10px #ff00c8;
        }

        /* –¢–µ–∫—Å—Ç —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º */
        .cosmic-title {
            font-family: 'Segoe UI', 'Inter', sans-serif;
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00f3ff, #ff00c8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(0, 243, 255, 0.5);
            letter-spacing: -0.5px;
        }

        .cosmic-subtitle {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 30px;
            font-weight: 500;
        }

        /* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤ —Å—Ç–∏–ª–µ —ç–Ω–µ—Ä–≥–∏–∏ */
        .cosmic-progress-container {
            width: 300px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin: 0 auto 20px;
            overflow: hidden;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        }

        .cosmic-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00f3ff, #ff00c8);
            border-radius: 2px;
            transition: width 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.6);
        }

        .cosmic-status {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 500;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes galaxyPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 40px #00f3ff, 0 0 80px #ff00c8; }
            50% { transform: scale(1.1); box-shadow: 0 0 60px #00f3ff, 0 0 120px #ff00c8; }
        }

        @keyframes orbitRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* –°–∫—Ä—ã—Ç–∏–µ */
        #cosmic-preloader.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .cosmic-title { font-size: 1.8rem; }
            .cosmic-logo { width: 70px; height: 70px; }
            .cosmic-progress-container { width: 250px; }
        }

        /* –§–æ–Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–∑–≤–µ–∑–¥—ã) */
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle var(--duration, 3s) infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* === –§–ò–ö–°–ê–¶–ò–Ø –î–õ–Ø –ü–†–ï–õ–û–ê–î–ï–†–ê –ò –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê === */
        html, body {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            overscroll-behavior: none;
            touch-action: none;
        }

        #app-content {
            height: 100vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        #cosmic-preloader {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100vw !important;
            height: 100vh !important;
            overflow: hidden !important;
            z-index: 99999 !important;
        }
    </style>
</head>
<body>
    <!-- –£–õ–¨–¢–†–ê–°–û–í–†–ï–ú–ï–ù–ù–´–ô –ö–û–°–ú–ò–ß–ï–°–ö–ò–ô PRELOADER -->
    <div id="cosmic-preloader">
        <!-- –ó–≤–µ–∑–¥–Ω–æ–µ –Ω–µ–±–æ -->
        <div id="stars-container"></div>
        
        <div class="cosmic-content">
            <div class="cosmic-logo">
                <div class="galaxy-core"></div>
                <div class="orbit-ring">
                    <div class="orbit-particle"></div>
                </div>
            </div>
            <div class="cosmic-title">–ö–∏–Ω–æ–í—Å–µ–ª–µ–Ω–Ω–∞—è</div>
            <div class="cosmic-subtitle">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞...</div>
            <div class="cosmic-progress-container">
                <div class="cosmic-progress-bar" id="cosmic-progress-bar"></div>
            </div>
            <div class="cosmic-status" id="cosmic-status">0% –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —è–¥—Ä–∞...</div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (—Å–∫—Ä—ã—Ç –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏) -->
    <div id="app-content" class="container" style="display: none;">
        <nav class="navbar">
            <div class="nav-brand">
                <h1>üåå –ö–∏–Ω–æ–í—Å–µ–ª–µ–Ω–Ω–∞—è</h1>
            </div>
            <div class="nav-tabs">
                <button class="tab-btn active" data-tab="moments">üé¨ –ú–æ–º–µ–Ω—Ç—ã –∏–∑ –∫–∏–Ω–æ</button>
                <button class="tab-btn" data-tab="trailers">üé• –¢—Ä–µ–π–ª–µ—Ä—ã</button>
                <button class="tab-btn" data-tab="news">üì∞ –ù–æ–≤–æ—Å—Ç–∏</button>
                <!-- –ù–û–í–ê–Ø –ö–ù–û–ü–ö–ê –í–ö–õ–ê–î–ö–ò -->
                <button class="tab-btn" data-tab="search_by_link">üîç –ü–æ–∏—Å–∫ –ø–æ —Å—Å—ã–ª–∫–µ</button>
            </div>
            <div class="search-container">
                <input type="text" id="search-input" class="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—è–º...">
                <button id="search-btn" class="search-btn">üîç</button>
            </div>
        </nav>
        
        <div id="content-area">
            <div style="text-align: center; padding: 50px; color: var(--accent);">
                <h2>üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ö–∏–Ω–æ–í—Å–µ–ª–µ–Ω–Ω—É—é!</h2>
                <p>–ó–¥–µ—Å—å —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è –∫–æ—Å–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Ñ–∏–ª—å–º–∞–º–∏, —Ç—Ä–µ–π–ª–µ—Ä–∞–º–∏ –∏ –Ω–æ–≤–æ—Å—Ç—è–º–∏</p>
            </div>
        </div>
    </div>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // –°–æ–∑–¥–∞–Ω–∏–µ –∑–≤–µ–∑–¥–Ω–æ–≥–æ –Ω–µ–±–∞
        document.addEventListener('DOMContentLoaded', function() {
            const starsContainer = document.getElementById('stars-container');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.width = `${Math.random() * 3 + 1}px`;
                star.style.height = star.style.width;
                star.style.setProperty('--duration', `${Math.random() * 4 + 2}s`);
                star.style.animationDelay = `${Math.random() * 5}s`;
                starsContainer.appendChild(star);
            }
        });

        // === –§–ò–ö–°–ê–¶–ò–Ø –ü–û–õ–ù–û–≠–ö–†–ê–ù–ù–û–ì–û –†–ï–ñ–ò–ú–ê ===
        document.addEventListener('DOMContentLoaded', function () {
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
            function enableFullscreenMode() {
                const html = document.documentElement;
                const body = document.body;
                
                // –§–∏–∫—Å–∏—Ä—É–µ–º html –∏ body
                html.style.position = 'fixed';
                html.style.width = '100%';
                html.style.height = '100%';
                html.style.overflow = 'hidden';
                
                body.style.position = 'fixed';
                body.style.width = '100%';
                body.style.height = '100%';
                body.style.overflow = 'hidden';
                body.style.overscrollBehavior = 'none';
                body.style.touchAction = 'none';

                // –†–∞–∑—Ä–µ—à–∞–µ–º —Å–∫—Ä–æ–ª–ª —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                const appContent = document.getElementById('app-content');
                if (appContent) {
                    appContent.style.height = '100vh';
                    appContent.style.overflowY = 'auto';
                    appContent.style.webkitOverflowScrolling = 'touch';
                    appContent.style.overscrollBehavior = 'contain';
                }

                console.log("Fullscreen mode enabled with proper scrolling");
            }

            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            enableFullscreenMode();

            // –¢–∞–∫–∂–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ URL (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SPA)
            window.addEventListener('popstate', enableFullscreenMode);
        });
    </script>
</body>
</html>
